{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load form_filters %}

{% block title %}{% trans "Reset password" %}{% endblock title %}

{% block css %}
<link rel="stylesheet" href="{% static 'style/css/main.css' %}">
<link rel="stylesheet" href="{% static 'style/css/navbar.css' %}">
<link rel="stylesheet" href="{% static 'style/css/btn.css' %}">
<link rel="stylesheet" href="{% static 'style/css/login.css' %}">
{% endblock css %}

{% block header %}
{% include 'navigation.html' %}
{% endblock header %}

{% block content %}
<div class="login-wrapper">
	<div class="login-card">
		<h2>{% trans "Reset your password" %} ðŸ”‘</h2>
		<p class="text-muted mb-4">{% trans "Enter your email address and weâ€™ll send you a link to reset your password."
			%}</p>

		<form method="post">
			{% csrf_token %}

			{% if messages %}
			{% for message in messages %}
			{% if message.tags == "error" %}
			<div class="alert alert-danger alert-dismissible fade show" role="alert">
				{{ message }}
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
			{% else %}
			<div class="alert alert-{{ message.tags|default:'info' }} alert-dismissible fade show" role="alert">
				{{ message }}
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
			{% endif %}
			{% endfor %}
			{% endif %}

			{% if form.non_field_errors %}
			<div class="alert alert-danger">{{ form.non_field_errors.0 }}</div>
			{% endif %}

			<div class="form-floating mb-3">
				{{ form.email|add_class_if_error:"is-invalid" }}
				<label for="{{ form.email.id_for_label }}">{% trans "Email address" %}</label>

				{% if form.email.errors %}
				<div class="invalid-feedback">{{ form.email.errors.0 }}</div>
				{% endif %}
			</div>

			<div class="d-grid">
				<button type="submit" class="btn btn-primary btn-login">
					{% trans "Send reset link" %}
				</button>
			</div>
		</form>

		<div class="form-footer">
			<p>
				<a href="{% url 'users:login' %}">{% trans "Back to login" %}</a>
			</p>
		</div>
	</div>
</div>
{% endblock content %}
